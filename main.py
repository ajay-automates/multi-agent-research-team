"""\nMulti-Agent Research Team \u2014 FastAPI Server\nWeb UI for running the research crew and viewing results.\n"""\n\nfrom fastapi import FastAPI, Request\nfrom fastapi.responses import HTMLResponse, JSONResponse\nfrom fastapi.templating import Jinja2Templates\nfrom fastapi.middleware.cors import CORSMiddleware\nimport os\nimport uvicorn\n\nfrom crew import ResearchCrew\n\napp = FastAPI(title="Multi-Agent Research Team", version="1.0.0")\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=["*"],\n    allow_methods=["*"],\n    allow_headers=["*"],\n)\n\ntemplates = Jinja2Templates(directory="templates")\n\n\n@app.get("/", response_class=HTMLResponse)\nasync def home(request: Request):\n    return templates.TemplateResponse("index.html", {"request": request})\n\n\n@app.post("/api/research")\nasync def research(request: Request):\n    try:\n        body = await request.json()\n        topic = body.get("topic", "").strip()\n        platforms = body.get("platforms", "linkedin,twitter,newsletter").strip()\n        if not topic:\n            return JSONResponse({"error": "Topic is required"}, status_code=400)\n        crew = ResearchCrew()\n        result = crew.run(topic=topic, platforms=platforms)\n        return JSONResponse(result)\n    except Exception as e:\n        return JSONResponse({"error": f"Research failed: {str(e)}"}, status_code=500)\n\n\n@app.get("/api/health")\nasync def health():\n    return {"status": "healthy", "anthropic_key_set": bool(os.getenv("ANTHROPIC_API_KEY")), "serper_key_set": bool(os.getenv("SERPER_API_KEY")), "framework": "CrewAI", "agents": 4}\n\n\nif __name__ == "__main__":\n    port = int(os.environ.get("PORT", 8000))\n    uvicorn.run("main:app", host="0.0.0.0", port=port, reload=True)\n